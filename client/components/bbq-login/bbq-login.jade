

navbar



.container.login-container(ng-if='! successfulTokenSent')

  .inner-container

    .title.login-title
      .title-container.login-title-container
        h1 Feedback Login


    form(name='emailRegisterForm' ng-submit='submitEmail(emailRegisterForm, email)' novalidate=''
        autocomplete='off')

      md-input-container
        label
        input(name='email' ng-model='email', required='true' type='email', autocomplete='off',
        ng-focus='isEmailFocused = true', ng-blur='isEmailFocused = false',
        placeholder='Enter your acc email')

        div(ng-if='(emailRegisterForm.$submitted || emailRegisterForm.email.$touched) && ! isEmailFocused'
        ng-messages="emailRegisterForm.email.$error" md-auto-hide="true")
          div(ng-message='email') That email doesn't look quite right
          div(ng-message='required') We need your email address


      md-button(type='submit')
        span(ng-hide='submitting') Next
          right-arrow-svg
        md-progress-circular(ng-show='submitting' md-mode='indeterminate')



.container.login-container(ng-if='successfulTokenSent')

  .inner-container

    .title.login-title.tiny-title
      .title-container.login-title-container
        h1 We have sent you an email.
          br
          | Enter the code you see in your inbox for:
    .title.email-title.small-title.small-margin
      .title-container
        h1 {{email}}
        md-button.md-icon-button(ng-click='edit()')
          edit-svg


    form(name='tokenRegisterForm', ng-submit='submitToken(tokenRegisterForm, registerToken)', novalidate, autocomplete='off')


      md-input-container
        label
        input.token-input(name='registerToken' ng-model='registerToken', required='true', type='number', autocomplete='off'
          ng-minlength='5' ng-maxlength='5' maxlength='5',
          ng-focus='isRegisterTokenFocused = true', ng-blur='isRegisterTokenFocused = false',
          placeholder='Enter the 5 digit code')

        div(ng-if='(tokenRegisterForm.$submitted || tokenRegisterForm.registerToken.$touched) && ! isRegisterTokenFocused'
        ng-messages="tokenRegisterForm.registerToken.$error" md-auto-hide="true")
          div(ng-message='required') You need to enter the code we sent you.
          div(ng-message='minlength') You haven't quite entered 5 digits
          div(ng-message='maxlength') You have entered too many digits
          div(ng-message='token') That token did not match the one we sent

      md-button(type='submit')
        span(ng-hide='submittingFirstToken') Login
          right-arrow-svg
        md-progress-circular(ng-show='submittingFirstToken' md-mode='indeterminate')



      md-content(ng-if='tokenTimedout')
        md-button.link-button.grey-button(type='button', ng-click='resendTokenEmail(email)')
          span(ng-hide='submittingSecondToken') Please send me another email
          md-progress-circular(ng-show='submittingSecondToken' md-mode='indeterminate')


      md-content(ng-if='successfulResentToken')
        label.deep-blue.second-token-sent Another email has been sent
